= form_for @document, :role => 'form', :html => {:multipart => true, :class => 'form-horizontal'} do |f|
  - if @document.errors.any?
    #error_explanation
      %h2= "#{pluralize(@document.errors.count, "error")} prohibited this paper from being saved:"
      %ul
        - @document.errors.full_messages.each do |msg|
          %li= msg
          
  - if params[:l].present?
    = hidden_field_tag :redirect_to, lab_path( params[:l] )
  
  <br />
  .form-group
    .col-sm-7
      Collection:
      
      
      
      - if current_user.collections.present?
        = f.label :collection_id, :class => 'sr-only'
        = f.select :collection_id, options_from_collection_for_select(current_user.collections, 'id', 'name', @document.collection_id), :class => 'form-control'
      - else
        #{current_user.name}'s documents
      
      
      &nbsp;
      (or #{link_to 'create a new collection', new_collection_path})
        
  
  
  - unless action_name == 'edit'
    .form-group
      .col-sm-7
        = f.label :file, :class => 'sr-only'
        = f.file_field :file, class: 'form-control'
        = f.hidden_field :file_cache
      
  .form-group
    .col-sm-7
      = f.label :name, :class => 'sr-only'
      = f.text_field :name, class: 'form-control', placeholder: 'Name', autofocus: true
      
  .form-group
    = f.label :description, :class => 'sr-only'
    .col-sm-7
      = f.text_area :description, class: 'form-control', placeholder: 'Description'
  
  .form-group
    .col-sm-7
      = f.label :source, :class => 'sr-only'
      = f.text_field :source, class: 'form-control', placeholder: 'Source'
      
  -# .form-group
  -#   .col-sm-7
  -#     = f.label :journal, :class => 'sr-only'
  -#     = f.text_field :journal, class: 'form-control', placeholder: 'Journal'
  -#
  .form-group
    .col-sm-7
      = f.label :principle_authors, :class => 'sr-only'
      = f.text_area :principle_authors, class: 'form-control', placeholder: 'Author(s)'

  .form-group
    .col-sm-7
      = f.submit 'Save', :class => 'btn btn-primary'
