#docs
  - documents.each do |document|
    .item
      %a{ href: "#{slugged_document_path(document.id, document.name.parameterize)}" }
        - if document.url.present?
          %img{ src: "/#{document.thumb_md}", alt: "thumbnail of #{document.name}", class: 'top'}
          
      .txt
        -# = render partial: 'documents/details', locals:{document: document}
        
        .small
          = document.name

          .pull-right
            #{document.created_at.strftime("%b %-d, %Y")}

          .clearfix
          - if col = document.collections.first
            In
            %i
              = link_to col.name, slugged_collection_path(col, col.name.parameterize)

            - if document.root_comments.size > 0
              .notification-icon
                %span.glyphicon.glyphicon-comment
                %span.badge{ style: 'font-size: 9px; opacity: 0.5;'}
                  = document.root_comments.size

            
        -# - if document.description.present?
        -#   .small
        -#     %i
        -#       = truncate(document.description, length: 50)

:javascript
  var container = document.querySelector('#docs');
  var msnry = new Masonry( container, {
    itemSelector: '.item'
  });
  imagesLoaded( container, function() {
    msnry.layout();
  })

  // initialize Masonry after all images have loaded  
  //container.imagesLoaded( function() {
  //  container.masonry({
  //    columnWidth: 200,
  //    itemSelector: '.item'
  //  });
  //});